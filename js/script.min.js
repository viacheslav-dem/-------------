document.addEventListener("DOMContentLoaded",function(){console.log("Website loaded!"),window.addEventListener("scroll",function(){let e=document.querySelectorAll(".fade-in"),t=window.innerHeight,l,i;e.forEach(e=>{e.getBoundingClientRect().top<t-100&&e.classList.add("visible")}),l=document.querySelectorAll("section"),i=document.querySelectorAll("nav a"),l.forEach(e=>{let t=e.offsetTop-100,l=t+e.offsetHeight,s=e.getAttribute("id");window.scrollY>=t&&window.scrollY<l&&i.forEach(e=>{e.classList.remove("active"),e.getAttribute("href")===`#${s}`&&e.classList.add("active")})});let s=document.querySelector(".header");s&&(window.scrollY>50?s.classList.add("scrolled"):s.classList.remove("scrolled"))}),document.querySelectorAll("nav a").forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href").substring(1),l=document.getElementById(t);window.scrollTo({top:l.offsetTop-50,behavior:"smooth"})})});let e=document.getElementById("back-to-top");if(e){let t=0;window.addEventListener("scroll",function(){let l=window.scrollY||document.documentElement.scrollTop,i=window.innerWidth<768?.15*window.innerHeight:.3*window.innerHeight;l>i?e.classList.add("show"):e.classList.remove("show"),e.style.opacity=l>t?"0.7":"1",t=l}),e.addEventListener("click",function(){window.scrollTo({top:0,behavior:"smooth"})})}document.querySelectorAll("button").forEach(e=>{e.addEventListener("mouseenter",()=>{e.style.transform="scale(1.05)",e.style.transition="transform 0.2s ease"}),e.addEventListener("mouseleave",()=>{e.style.transform="scale(1)"})});let l=document.title;document.addEventListener("visibilitychange",()=>{document.hidden?document.title="Вернитесь на сайт! \uD83D\uDE0A":document.title=l});let i=document.querySelector(".menu-toggle"),s=document.querySelector(".mobile-nav");i&&s?i.addEventListener("click",function(){this.classList.toggle("active"),s.classList.toggle("active")}):console.error("Элементы 'menu-toggle' или 'mobile-nav' не найдены на странице.");let a=document.querySelectorAll(".photo-grid a"),n=document.getElementById("modalPhoto"),o=document.getElementById("photoModal"),r;o&&n?(r=new bootstrap.Modal(o),a.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();let t=this.getAttribute("href");n.src=t,r.show()})}),o.addEventListener("hidden.bs.modal",function(){n.src=""})):console.error("Элементы для модального окна фотографий не найдены на странице."),window.addEventListener("scroll",function(){document.documentElement.style.setProperty("--parallax-offset",`${.751*window.scrollY}px`)});let c=document.getElementById("galleryContainer"),d=document.getElementById("loadMore"),u=1,m=[{src:"images/room1-min.webp",alt:"Семейный номер с двуспальной кроватью, диваном и ванной в гостинице для отдыха с семьей в Витебской области"},{src:"images/room2-min.webp",alt:"Удобный и недорогой номер с двумя кроватями для комфортного отдыха"},{src:"images/room3-min.webp",alt:"Уютный стандартный номер с двумя кроватями и санузлом, отдельным входом"},{src:"images/photo1.webp",alt:"Общий вид на нашу гостиницу"},{src:"images/navolne-3.webp",alt:"Берег с мангалом и местом для отдыха"},{src:"images/photo3.webp",alt:"Мостки для рыбалки"},{src:"images/navolne-2.webp",alt:"Наша агроусадьба в Витебской области"},{src:"images/photo5.webp",alt:"Красивые виды для любителей спокойствия"},{src:"images/photo11.webp",alt:"Озеро для рыбалки в Витебской области"},{src:"images/photo12.webp",alt:"Качели"},{src:"images/photo13.webp",alt:"Гамак"},{src:"images/photo14.webp",alt:"общий вид на природу"}];function p(e){let t=(e-1)*6,l=m.slice(t,t+6);l.forEach((e,l)=>{let i=function e(t,l){let i=document.createElement("div");return i.className="col-12 col-md-6 col-lg-4",i.innerHTML=`
            <a href="#" class="gallery-item" 
               data-bs-toggle="modal" 
               data-bs-target="#galleryModal" 
               data-index="${l}">
                <img src="${t.src}" 
                     class="img-fluid" 
                     alt="${t.alt}" 
                     loading="lazy">
            </a>
        `,i}(e,t+l);c.appendChild(i),function e(t,l){let i=document.getElementById("modalCarouselInner"),s=i.querySelectorAll(".carousel-item");if(s.length<=l){let a=document.createElement("div");a.className=`carousel-item ${0===l?"active":""}`,a.innerHTML=`<img src="${t.src}" class="d-block w-100" alt="${t.alt}">`,i.appendChild(a)}}(e,t+l)}),t+l.length>=m.length&&(d.style.display="none")}p(u),c.addEventListener("click",e=>{let t=e.target.closest(".gallery-item");if(t){let l=t.dataset.index;(function e(t){let l=new bootstrap.Carousel("#modalCarousel");l.to(t)})(l)}}),d.addEventListener("click",()=>{p(++u)}),new Swiper(".reviews-slider",{loop:!0,slidesPerView:3,slidesPerGroup:3,centeredSlides:!0,spaceBetween:20,loopedSlides:3,autoplay:{delay:4e3,disableOnInteraction:!1},breakpoints:{320:{slidesPerView:1,slidesPerGroup:1},768:{slidesPerView:1,slidesPerGroup:1},1024:{slidesPerView:2,slidesPerGroup:2}},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}});let v=document.querySelectorAll("#contactForm, #bookingForm"),g=/^(?:\+375|80|\+7)[\d\s\-()]{8,15}$/,f=/^[a-zA-Zа-яА-ЯёЁ\s]+$/;v.forEach(function(e){let t=e.querySelector('input[type="text"]'),l=e.querySelector('input[type="tel"]'),i=e.querySelector('button[type="submit"]');function s(){if(t&&l){let e=f.test(t.value.trim())&&t.value.trim().length>=2,s=g.test(l.value.trim());e&&s?i.disabled=!1:i.disabled=!0}}t&&t.addEventListener("input",function(){!f.test(t.value.trim())||t.value.trim().length<2?(t.classList.add("is-invalid"),t.classList.remove("is-valid")):(t.classList.remove("is-invalid"),t.classList.add("is-valid")),s()}),l&&l.addEventListener("input",function(){g.test(l.value.trim())?(l.classList.remove("is-invalid"),l.classList.add("is-valid")):(l.classList.add("is-invalid"),l.classList.remove("is-valid")),s()}),e.addEventListener("submit",function(e){let i=!0;t&&(t.value.trim().length<2||!f.test(t.value.trim()))&&(t.classList.add("is-invalid"),i=!1),l&&!g.test(l.value.trim())&&(l.classList.add("is-invalid"),i=!1),i||(e.preventDefault(),e.stopPropagation())}),s()});let h=document.querySelectorAll("#contactForm, #bookingForm");h.forEach(function(e){e.addEventListener("submit",function(t){t.preventDefault();let l=e.querySelector('input[type="text"]').value,i=e.querySelector('input[type="tel"]').value,s=new FormData;s.append("name",l),s.append("phone",i);let a=new XMLHttpRequest;a.open("POST","php/send-email.php",!0),a.onload=function(){200===a.status?(alert("Сообщение отправлено!"),e.reset(),e.querySelectorAll(".is-valid, .is-invalid").forEach(e=>{e.classList.remove("is-valid","is-invalid")}),updateSubmitButton()):alert("Ошибка при отправке сообщения.")},a.send(s)})})});